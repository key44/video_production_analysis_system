# 動画生産分析システム (VPAS: Video Production Analysis System)

製造現場の作業を動画で記録し、簡易的な工程分析・作業頻度の可視化ができるオープンソースツールです。生産改善におけるムリ・ムダ・ムラの把握と工程の見える化を支援します。

## システムの特徴

本システムは、製造業の現場改善における「動画工程分析」を誰でも簡単に実施できるようにするために開発されました。

### 一般的な動画工程分析システムとの違い

一般的な有料の動画工程分析ツールは、以下のような高度な機能を備えています：

- **複雑な多軸分析機能**：複数の作業者や機械の動作を同時に分析
- **微細な動作分析**：フレーム単位での詳細な動作抽出と最適化提案
- **自動分析機能**：AI による動作パターン認識や異常検知
- **高度なシミュレーション**：改善案の効果予測やシミュレーション
- **企業向けの統合管理機能**：多数のプロジェクト管理、レポート生成、権限管理

それに対して、本システムの特徴は以下の通りです：

- **シンプルで使いやすい**：複雑な操作なしに、すぐに作業記録を開始できます
- **低コスト**：完全無料で利用可能です
- **リアルタイム記録**：ブラウザ上で動画を再生しながら、その場で作業内容を記録できます
- **基本的な分析機能**：作業頻度の集計と円グラフによる可視化で、作業バランスが一目で分かります
- **データの柔軟な活用**：JSON・CSV形式でデータをエクスポートでき、Excel等での二次分析が容易です
- **カスタマイズ性**：オープンソースなので、自社の用途に合わせた改変・改良が可能です

### こんな場面で活躍します

- 新人教育における作業時間の把握
- 工程間の作業バランスの確認
- 複数の作業者による作業時間の比較
- 改善前後の作業時間変化の記録
- 生産性向上の第一段階としての「見える化」

## 対応環境

- **実行環境**：モダンブラウザ（Chrome、Firefox、Safari、Edge）
- **言語**：JavaScript（フロントエンドのみ）
- **外部ライブラリ**：Tailwind CSS、Chart.js、YouTube IFrame API

## 機能概要

- **複数の動画ソース対応**：YouTubeの動画またはローカルの動画ファイルを分析対象にできます
- **作業内容の記録**：動画の再生時間と関連する作業内容を時系列で記録します
- **ショートカットキー対応**：キーボード操作で迅速に作業を記録できます
- **分析機能**：記録した作業データをリスト表示またはグラフで可視化します
- **プロジェクト管理**：分析データをJSON形式で保存・読込できます
- **データ出力**：記録したデータをCSV形式でエクスポートでき、Excel等での詳細分析が可能です
- **カスタマイズ可能な作業項目**：用途に合わせて作業項目を自由に追加・編集できます

## 使い方

### 1. 動画の読み込み

#### YouTubeの動画を使用する場合
1. 「YouTube動画のURLを入力」フィールドにYouTubeの動画URLを貼り付け
2. 「読込」ボタンをクリック
3. 動画が再生エリアに読み込まれます

#### ローカル動画ファイルを使用する場合
1. 「ローカル動画ファイルを選択」ボタンをクリック
2. お使いのパソコンから動画ファイルを選択（MP4、MOV、WebMなど対応）
3. 動画が再生エリアに読み込まれます

### 2. 作業の記録

再生中の動画で作業内容を記録するには、以下の方法があります：

#### マウス操作で記録
右側パネルの「作業項目」セクションに表示されるボタンをクリック

#### キーボード操作で記録（推奨）
- **A キー**：作業 A を記録
- **S キー**：作業 B を記録
- **D キー**：作業 C を記録
- **F キー**：作業 D を記録
- **Q キー**：休憩を記録
- **W キー**：その他を記録

### 3. 再生コントロール

| 操作 | キー | ボタン |
|------|------|--------|
| 再生 | Z | 再生ボタン |
| 一時停止 | X | 一時停止ボタン |
| マーカー設置 | C | マーカー設置ボタン |
| 戻る | ← | << ボタン |
| 進む | → | >> ボタン |

**マーカー設置機能**：C キーで現在の再生時間をマーク。もう一度 C キーを押すとマークした時間に戻ります。

### 4. 記録データの確認

右下のパネルで記録した作業データを確認できます：

#### リスト表示
- 再生時間、作業内容が一覧表示されます
- 再生時間をクリックするとその時間に動画をジャンプできます
- 「削除」ボタンで個別の記録を削除できます

#### グラフ表示
- 作業内容ごとの記録回数を円グラフで表示
- 作業別の割合が一目で分かります

### 5. 作業項目の編集

1. リスト表示エリアの「作業項目を編集」をクリック
2. モーダルウィンドウで作業項目の名前・色・ショートカットキーを設定
3. 「新しい作業を追加」で新しい作業項目を追加可能
4. 「削除」ボタンで不要な作業項目を削除
5. 「保存」をクリックで変更を反映

**注意**：Z、X、C キーはシステム予約キーのため、ショートカットとして使用できません。

### 6. プロジェクトの保存・読込

#### プロジェクトの保存
1. ページ上部の「プロジェクトを保存」ボタンをクリック
2. JSON形式のファイルがダウンロードされます
3. 後で同じプロジェクトを開く場合は、このファイルを保存しておきます

#### プロジェクトの読込
1. 「プロジェクトを読込」ボタンをクリック
2. 以前保存したプロジェクトファイル（.json）を選択
3. 前回の作業データと動画設定が復元されます

### 7. プロジェクト題名の設定

ページ上部のテキストフィールドにプロジェクト名を入力できます。この名前は保存時およびCSV出力時のファイル名に使用されます。

### 8. データのエクスポート

1. 「CSV出力」ボタンをクリック
2. CSV形式のファイルがダウンロードされます
3. Excelなど表計算ソフトで開いて、さらに詳細な分析が可能です

## キーボード操作一覧

| キー | 機能 |
|------|------|
| Z | 再生 |
| X | 一時停止 |
| C | マーカー設置/復帰 |
| ← | 後ろにスキップ |
| → | 前に進む |
| A～F, Q, W | 作業の記録（作業項目の設定に依存） |

## 新規プロジェクト

「新規プロジェクト」ボタンをクリックするとページがリロードされ、すべての記録がクリアされます。新しい分析を始める場合に使用します。

## 対応動画形式

- **YouTube**：すべてのパブリック動画
- **ローカルファイル**：MP4、MOV、WebM（ブラウザが対応している形式）

## トラブルシューティング

### YouTubeの動画が読み込めない
- 正しいYouTubeのURLを入力しているか確認してください
- URLは `https://www.youtube.com/watch?v=xxxxx` または `https://youtu.be/xxxxx` の形式です
- 動画がパブリック状態か確認してください

### ローカル動画ファイルが再生できない
- お使いのブラウザが対応している形式か確認してください
- ファイルが破損していないか確認してください

### キーボード操作が効かない
- テキスト入力フィールドがアクティブになっていないか確認してください
- モーダルウィンドウが開いていないか確認してください

### データが保存されない
- ブラウザのJavaScriptが有効になっているか確認してください
- ダウンロードフォルダにファイルが保存されているか確認してください

## ヒント

- **効率的な記録**：マウス操作より、キーボードショートカットを使用することで、より迅速に作業を記録できます
- **作業項目のカスタマイズ**：プロジェクトごとに最適な作業項目を設定することで、より正確な分析が可能になります
- **定期的な保存**：定期的に「プロジェクトを保存」ボタンで進捗を保存することをお勧めします
- **グラフの活用**：グラフ表示で作業バランスを確認し、生産性の改善に役立てられます
- **CSV出力での詳細分析**：エクスポートしたCSVをExcelで加工することで、より高度な分析が可能です

## 対応ブラウザ

- Google Chrome 最新版
- Mozilla Firefox 最新版
- Apple Safari 最新版
- Microsoft Edge 最新版
